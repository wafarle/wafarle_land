# โญ ููุฒุฉ ุชูููู ุงูุงุดุชุฑุงูุงุช ูุชุฑู ุงูุขุฑุงุก

## โ ุชู ุฅุถุงูุฉ ููุฒุฉ ุงูุชููููุงุช ุจูุฌุงุญ!

ููุฏ ููุช ุจุฅุถุงูุฉ ููุฒุฉ ุดุงููุฉ ูุชูููู ุงูุงุดุชุฑุงูุงุช ูุชุฑู ุงูุขุฑุงุก ูู ููุญุฉ ุงูุนููุงุก. ุฅููู ููุฎุต ุงูููุฒุฉ:

### ๐ฏ **ุงูููุฒุงุช ุงููุถุงูุฉ**

#### 1. **ูุงุฌูุฉ ุงูุชูููู**
- โ ุชูููู ูู 1-5 ูุฌูู
- โ ุนููุงู ุงูุชูููู (ูุทููุจ)
- โ ุชุนููู ููุตู (ูุทููุจ)
- โ ุชุญูู ูู ุฃูููุฉ ุงูุชูููู
- โ ููุน ุงูุชูููู ุงูููุฑุฑ

#### 2. **ุฅุฏุงุฑุฉ ุงูุชููููุงุช**
- โ ุนุฑุถ ุฌููุน ุชููููุงุช ุงูุนููู
- โ ุฅููุงููุฉ ุงูุชุนุฏูู ูุงูุญุฐู
- โ ุญุงูุฉ ุงูุชูููู (ูุนูู/ููุงูู/ูุฑููุถ)
- โ ุนูุงูุฉ ุงูุนููู ุงูููุซู

#### 3. **ูุงุฌูุฉ ุงููุณุชุฎุฏู**
- โ ุชุจููุจ "ุชููููุงุชู" ูู ููุญุฉ ุงูุนููุงุก
- โ ุฒุฑ "ุชูููู" ูู ูู ุงุดุชุฑุงู
- โ ูุงูุฐุฉ ููุจุซูุฉ ููุชูููู
- โ ูุงุฆูุฉ ุงูุชููููุงุช ูุน ุงูุชูุงุตูู

## ๐ง **ููููุฉ ุงูุนูู**

### **ุชูููู ุงูุงุดุชุฑุงู**
```typescript
const handleSubmit = async (e: React.FormEvent) => {
  e.preventDefault();
  
  if (!title.trim() || !comment.trim()) {
    setError('ูุฑุฌู ููุก ุฌููุน ุงูุญููู ุงููุทููุจุฉ');
    return;
  }

  setLoading(true);
  setError('');

  try {
    await addSubscriptionReview({
      subscriptionId: subscription.id,
      customerId: customerEmail,
      customerEmail: customerEmail,
      customerName: customerName,
      productId: subscription.productId,
      productName: subscription.productName,
      rating: rating,
      title: title.trim(),
      comment: comment.trim(),
      isVerified: true,
      helpful: 0,
      status: 'pending'
    });

    onReviewAdded();
    onClose();
  } catch (error: any) {
    setError(error.message || 'ุญุฏุซ ุฎุทุฃ ูู ุฅุถุงูุฉ ุงูุชูููู');
  } finally {
    setLoading(false);
  }
};
```

### **ุงูุชุญูู ูู ุฃูููุฉ ุงูุชูููู**
```typescript
export const canCustomerReviewSubscription = async (customerEmail: string, subscriptionId: string): Promise<boolean> => {
  // Check if customer already reviewed this subscription
  const existingReviews = await getSubscriptionReviews(subscriptionId);
  const hasExistingReview = existingReviews.some(review => 
    review.customerEmail.toLowerCase() === customerEmail.toLowerCase()
  );
  
  if (hasExistingReview) {
    return false;
  }
  
  // Check if customer has this subscription
  const customerSubscriptions = await getCustomerSubscriptions(customerEmail);
  const hasSubscription = customerSubscriptions.some(sub => sub.id === subscriptionId);
  
  return hasSubscription;
};
```

## ๐จ **ุงูุชุตููู ุงูุจุตุฑู**

### **ุฒุฑ ุงูุชูููู**
```typescript
<button 
  onClick={() => {
    setSelectedSubscription(subscription);
    setShowReviewModal(true);
  }}
  className="inline-flex items-center px-3 py-1.5 border border-yellow-300 text-xs font-medium rounded-md text-yellow-700 bg-yellow-50 hover:bg-yellow-100 transition-colors"
>
  <Star className="w-3 h-3 mr-1" />
  ุชูููู
</button>
```

### **ูุงูุฐุฉ ุงูุชูููู**
- ุชุตููู ุฃููู ูุน ุฃููููุงุช ุงููุฌูู
- ุญููู ุงูุนููุงู ูุงูุชุนููู ูุน ุนุฏุงุฏ ุงูุฃุญุฑู
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ
- ุชุฃุซูุฑุงุช ุงูุชูุงููุฉ ุณูุณุฉ

### **ูุงุฆูุฉ ุงูุชููููุงุช**
- ุนุฑุถ ุงููุฌูู ูุน ุงูุชูููู
- ูุนูููุงุช ุงูุนููู ูุงูุชุงุฑูุฎ
- ุนูุงูุฉ "ุนููู ููุซู"
- ุฅููุงููุฉ ูุฑุงุกุฉ ุงููุฒูุฏ/ุฃูู

## ๐ **ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช**

### **ูุงุฌูุฉ ุงูุชูููู**
```typescript
export interface SubscriptionReview {
  id: string;
  subscriptionId: string;
  customerId: string;
  customerEmail: string;
  customerName: string;
  productId: string;
  productName: string;
  rating: number; // 1-5 stars
  title: string;
  comment: string;
  isVerified: boolean; // true if customer actually used the subscription
  helpful: number; // number of helpful votes
  createdAt: Date;
  updatedAt: Date;
  status: 'pending' | 'approved' | 'rejected';
}
```

### **ุฏูุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช**
- โ `addSubscriptionReview` - ุฅุถุงูุฉ ุชูููู ุฌุฏูุฏ
- โ `getSubscriptionReviews` - ุฌูุจ ุงูุชููููุงุช
- โ `getCustomerReviews` - ุฌูุจ ุชููููุงุช ุงูุนููู
- โ `updateSubscriptionReview` - ุชุญุฏูุซ ุงูุชูููู
- โ `deleteSubscriptionReview` - ุญุฐู ุงูุชูููู
- โ `canCustomerReviewSubscription` - ุงูุชุญูู ูู ุงูุฃูููุฉ
- โ `getProductAverageRating` - ูุชูุณุท ุชูููู ุงูููุชุฌ

## ๐ **ุชุฏูู ุงูุนูู**

### **ูุฅุถุงูุฉ ุชูููู ุฌุฏูุฏ**
1. **ุงูููุฑ ุนูู ุฒุฑ "ุชูููู"** โ ูุชุญ ูุงูุฐุฉ ุงูุชูููู
2. **ุงูุชุญูู ูู ุงูุฃูููุฉ** โ ุงูุชุฃูุฏ ูู ุนุฏู ุงูุชูููู ุงูููุฑุฑ
3. **ููุก ุงููููุฐุฌ** โ ุงูุชูููู ูุงูุนููุงู ูุงูุชุนููู
4. **ุฅุฑุณุงู ุงูุชูููู** โ ุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
5. **ุชุญุฏูุซ ุงููุงุฆูุฉ** โ ุฅุนุงุฏุฉ ุชุญููู ุงูุชููููุงุช

### **ูุนุฑุถ ุงูุชููููุงุช**
1. **ุงูุงูุชูุงู ูุชุจููุจ "ุชููููุงุชู"** โ ุนุฑุถ ุฌููุน ุงูุชููููุงุช
2. **ุนุฑุถ ุงูุชูุงุตูู** โ ุงููุฌูู ูุงูุนููุงู ูุงูุชุนููู
3. **ุฅููุงููุฉ ุงูุชุนุฏูู/ุงูุญุฐู** โ ุฅุฏุงุฑุฉ ุงูุชููููุงุช

## ๐งช **ุงูุงุฎุชุจุงุฑ**

### **1. ุงุฎุชุจุงุฑ ุฅุถุงูุฉ ุชูููู**
1. ุงุฐูุจ ุฅูู ููุญุฉ ุงูุนููุงุก
2. ุงุฎุชุฑ ุชุจููุจ "ุงุดุชุฑุงูุงุชู"
3. ุงููุฑ ุนูู ุฒุฑ "ุชูููู" ูู ุฃู ุงุดุชุฑุงู
4. ุงููุฃ ุงููููุฐุฌ ูุฃุฑุณู ุงูุชูููู
5. ุชุญูู ูู ุธููุฑ ุงูุชูููู ูู ุชุจููุจ "ุชููููุงุชู"

### **2. ุงุฎุชุจุงุฑ ููุน ุงูุชูููู ุงูููุฑุฑ**
1. ูู ุจุชูููู ุงุดุชุฑุงู
2. ุญุงูู ุชููููู ูุฑุฉ ุฃุฎุฑู
3. ุชุญูู ูู ุธููุฑ ุฑุณุงูุฉ "ูุง ููููู ุชูููู ูุฐุง ุงูุงุดุชุฑุงู"

### **3. ุงุฎุชุจุงุฑ ุนุฑุถ ุงูุชููููุงุช**
1. ุงุฐูุจ ุฅูู ุชุจููุจ "ุชููููุงุชู"
2. ุชุญูู ูู ุนุฑุถ ุฌููุน ุงูุชููููุงุช
3. ุชุญูู ูู ุงูุชูุงุตูู (ุงููุฌููุ ุงูุนููุงูุ ุงูุชุนููู)

## ๐ **ุงููููุงุช ุงููุถุงูุฉ/ุงููุญุฏุซุฉ**

### `src/lib/firebase.ts`
- โ ุฅุถุงูุฉ ูุงุฌูุฉ `SubscriptionReview`

### `src/lib/database.ts`
- โ ุฅุถุงูุฉ ุฏูุงู ุฅุฏุงุฑุฉ ุงูุชููููุงุช
- โ ุฅุถุงูุฉ ุงุณุชูุฑุงุฏ `SubscriptionReview`

### `src/components/customer/ReviewModal.tsx`
- โ ูููู ูุงูุฐุฉ ุงูุชูููู
- โ ูููู ูุงุฆูุฉ ุงูุชููููุงุช
- โ ูุนุงูุฌุฉ ุงูููุงุฐุฌ ูุงูุฃุฎุทุงุก

### `src/app/customer/dashboard/page.tsx`
- โ ุฅุถุงูุฉ ุชุจููุจ "ุชููููุงุชู"
- โ ุฅุถุงูุฉ ุฒุฑ ุงูุชูููู ูู ุงูุงุดุชุฑุงูุงุช
- โ ุฅุถุงูุฉ ูุงูุฐุฉ ุงูุชูููู
- โ ุชุญููู ูุนุฑุถ ุงูุชููููุงุช

### `src/components/OrderForm.tsx`
- โ ุฅุตูุงุญ ุฎุทุฃ `quantity` undefined

## ๐ฏ **ุงูููุงุฆุฏ**

โ **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณูุฉ**: ุฅููุงููุฉ ุชูููู ุงูุงุดุชุฑุงูุงุช ุจุณูููุฉ  
โ **ูุตุฏุงููุฉ ุนุงููุฉ**: ุชููููุงุช ูู ุนููุงุก ููุซููู ููุท  
โ **ููุน ุงูุชูุฑุงุฑ**: ูู ุนููู ูููู ูู ุงุดุชุฑุงู ูุฑุฉ ูุงุญุฏุฉ ููุท  
โ **ุฅุฏุงุฑุฉ ุดุงููุฉ**: ุนุฑุถ ูุฅุฏุงุฑุฉ ุฌููุน ุงูุชููููุงุช  
โ **ุชุตููู ูุชุฌุงูุจ**: ูุนูู ุนูู ุฌููุน ุงูุฃุฌูุฒุฉ  
โ **ุฃูุงู ุงูุจูุงูุงุช**: ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ูุจู ุงูุญูุธ  

## ๐ **ุงูุงุณุชุฎุฏุงู**

### **ููุนููุงุก**
1. **ุงุฐูุจ ุฅูู ููุญุฉ ุงูุนููุงุก**
2. **ุงุฎุชุฑ ุชุจููุจ "ุงุดุชุฑุงูุงุชู"**
3. **ุงููุฑ ุนูู ุฒุฑ "ุชูููู" ูู ุฃู ุงุดุชุฑุงู**
4. **ุงููุฃ ุงููููุฐุฌ ูุฃุฑุณู ุงูุชูููู**
5. **ุชุญูู ูู ุชููููุงุชู ูู ุชุจููุจ "ุชููููุงุชู"**

### **ูููุทูุฑูู**
```typescript
// ุฅุถุงูุฉ ุชูููู ุฌุฏูุฏ
import { addSubscriptionReview } from '@/lib/database';

const reviewId = await addSubscriptionReview({
  subscriptionId: 'sub-123',
  customerId: 'customer@example.com',
  customerEmail: 'customer@example.com',
  customerName: 'ุงุณู ุงูุนููู',
  productId: 'product-123',
  productName: 'ุงุณู ุงูููุชุฌ',
  rating: 5,
  title: 'ุนููุงู ุงูุชูููู',
  comment: 'ุชุนููู ููุตู',
  isVerified: true,
  helpful: 0,
  status: 'pending'
});

// ุฌูุจ ุชููููุงุช ุงูุนููู
import { getCustomerReviews } from '@/lib/database';

const reviews = await getCustomerReviews('customer@example.com');
```

## โ๏ธ **ููุงุญุธุงุช ูููุฉ**

1. **ุงูุชุญูู ูู ุงูุฃูููุฉ**: ุงูุนููู ูุฌุจ ุฃู ูููู ุงูุงุดุชุฑุงู ูุชููููู
2. **ููุน ุงูุชูุฑุงุฑ**: ูู ุนููู ูููู ูู ุงุดุชุฑุงู ูุฑุฉ ูุงุญุฏุฉ ููุท
3. **ุญุงูุฉ ุงูุชูููู**: ุงูุชููููุงุช ุชุจุฏุฃ ุจุญุงูุฉ "ูุนูู" ูุชุญุชุงุฌ ููุงููุฉ
4. **ุงูุนููู ุงูููุซู**: ุงูุชููููุงุช ุชุญูู ุนูุงูุฉ "ุนููู ููุซู"

## ๐ **ุงูุฎุทูุงุช ุงูุชุงููุฉ**

1. **ุฅุถุงูุฉ ููุงููุฉ ุงูุฅุฏุงุฑุฉ**: ุฅุถุงูุฉ ูุงุฌูุฉ ููููุงููุฉ ุนูู ุงูุชููููุงุช
2. **ุฅุถุงูุฉ ุชููููุงุช ุงูููุชุฌุงุช**: ุนุฑุถ ุงูุชููููุงุช ูู ุตูุญุฉ ุงูููุชุฌ
3. **ุฅุถุงูุฉ ุชุตููู ุงูุชููููุงุช**: ุชุตููู ุญุณุจ ุงููุฌูู ุฃู ุงูุชุงุฑูุฎ
4. **ุฅุถุงูุฉ ุฅุญุตุงุฆูุงุช**: ูุชูุณุท ุงูุชููููุงุช ูุนุฏุฏูุง

## ๐ **ุงูุฎูุงุตุฉ**

ุชู ุฅุถุงูุฉ ููุฒุฉ ุชูููู ุงูุงุดุชุฑุงูุงุช ุจูุฌุงุญ! ุงููุธุงู ุงูุขู ูุชูุญ ููุนููุงุก:

- โ ุชูููู ุงุดุชุฑุงูุงุชูู ุจุณูููุฉ
- โ ุนุฑุถ ุฌููุน ุชููููุงุชูู
- โ ุฅุฏุงุฑุฉ ุชููููุงุชูู (ุชุนุฏูู/ุญุฐู)
- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณูุฉ

ุงูููุฒุฉ ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู! ๐






